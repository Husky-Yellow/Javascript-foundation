<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>4.9文本框中的事件应用</title>
    <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
    <style>
       body{font-size: 13px;}
       /* 元素初始状态样式 */
       .divInit{
           width: 390px;
           height: 55px;
           line-height: 55px;
           padding-left:20px; 
       }
       .txtInit{
           border: #666 1px solid;
           background-image: url();
       }
       .spnInit{
           width: 179px;
           height: 40px;
           line-height: 40px;
           float: right;
           margin-top: 8px;
           padding-left:10px;
           background-repeat:no-repeat; 
       }
       /* 元素丢失焦点样式 */
       .divBlur{
           background-color: #feeec2;
       }
       .txtBlur{
           border: #666 1px solid;
           padding: 3px;
           background-image: url();
       }
       .spnBlur{
            background-image: url();
       }
       /* div获取焦点样式 */
       .divFocus{
           background-color: #edffd5;
       }
       /* 验证成功时span样式 */
       .spnSucc{
           background-image: url();
           margin-top: 20px;
       }
    </style>
    <script>
        $(function(){
            //默认时文本框获取焦点
           $("#txtEmail").trigger("focus");
           //文本框获取焦点事件
           $("txtEmail").focus(function(){
               $(this).removeClass("txtBlur").addClass("txtInit");
               $("#email").removeClass("divBlur").addClass("divFocu");
               $("#spnTip").removeClass("spnBlur").removeClass("spnSucc").html("请输入您常用邮箱地址!");
           })

           //文本框丢失焦点事件
           $("#txtEmail").blur(function(){
               var vtxt = $("#txtEmail").val();
               if(vtxt.length == 0){
                $(this).removeClass("txtInit").addClass("txtBlur");
                $("#email").removeClass("divFocu").addClass("divBlur");
                $("#spnTip").removeClass("spnBlur").html("邮箱地址不能为空!");
               }else{
                   //检测邮箱格式是否正确
                    if(!chkEmail(vtxt)){
                        $(this).removeClass("txtInit").addClass("txtBlur");
                        $("#email").removeClass("divFocu").addClass("divBlur");
                        $("#spnTip").removeClass("spnBlur").html("邮箱格式不正确!");
                    }else{
                        //如果正确
                        $(this).removeClass("txtBlur").addClass("txtInit");
                        $("#email").removeClass("divFocu");
                        $("#spnTip").removeClass("spnBlur").addClass("spnSucc").html("");
                    }
               }
           })
        //    验证邮箱格式是否正确
        //     参数strEmail,需要验证的邮箱
        function chkEmail(strEmail) {
            if(!/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/
                    .test(strEmail)){
                        return false;
                    }
                    else{
                        return true;
                    } 
             }
        })
    </script>
</head>

<body>
    <from id="from1" action="#">
        <div id="email" class="divInit">邮箱
            <span id="spnTip" class="spnInit"></span>
            <input type="text" name="" id="txtEmail" class="txtInit">
        </div>
    </from>
</body>

</html>